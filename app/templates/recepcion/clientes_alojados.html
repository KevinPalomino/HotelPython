{% extends "base.html" %}

{% block title %}Clientes Alojados - Hotel Management{% endblock %}

{% block content %}
<div class="breadcrumb">
    <a href="{{ url_for('recepcion.panel_recepcionista') }}">
        <i class="fas fa-concierge-bell"></i> Panel Recepción
    </a>
    <span> / Clientes Alojados</span>
</div>

<h1 class="page-title">
    <i class="fas fa-bed"></i>
    Clientes Alojados Actualmente
</h1>

<!-- Formulario de búsqueda -->
<div class="card mb-4">
    <div class="card-body">
        <form method="GET" action="{{ url_for('recepcion.clientes_alojados') }}" class="form-inline">
            <div class="form-group mr-2 mb-0">
                <input type="text" name="filtro" class="form-control" placeholder="Buscar por nombre o cédula..." value="{{ filtro or '' }}" style="width: 300px;">
            </div>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-search"></i> Buscar
            </button>
            {% if filtro %}
            <a href="{{ url_for('recepcion.clientes_alojados') }}" class="btn btn-secondary ml-2">
                <i class="fas fa-times"></i> Limpiar
            </a>
            {% endif %}
        </form>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">Listado de Huéspedes</h2>
        {% if clientes %}
        <span class="badge badge-info ml-2">{{ clientes|length }} huésped(es) alojado(s)</span>
        {% endif %}
    </div>

    {% if clientes %}
    <div class="table-container">
        <table class="table">
            <thead>
                <tr>
                    <th><i class="fas fa-id-card"></i> Cédula</th>
                    <th><i class="fas fa-user"></i> Nombre Completo</th>
                    <th><i class="fas fa-bed"></i> Habitación</th>
                    <th><i class="fas fa-sign-in-alt"></i> Fecha de Check-in</th>
                    <th><i class="fas fa-sign-out-alt"></i> Fecha de Check-out</th>
                </tr>
            </thead>
            <tbody>
                {% for cliente in clientes %}
                <tr>
                    <td>{{ cliente.cedula }}</td>
                    <td>{{ cliente.nombre }}</td>
                    <td>
                        <span class="badge badge-primary">Habitación {{ cliente.idhabitaciones }}</span>
                    </td>
                    <td>{{ cliente.checkin.strftime('%d/%m/%Y') }}</td>
                    <td>{{ cliente.checkout.strftime('%d/%m/%Y') }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="text-center p-4">
        <i class="fas fa-bed" style="font-size: 3rem; color: var(--text-light); margin-bottom: 1rem;"></i>
        {% if filtro %}
        <p style="color: var(--text-light); font-size: 1.1rem;">
            No se encontraron clientes alojados que coincidan con "<strong>{{ filtro }}</strong>".
        </p>
        <a href="{{ url_for('recepcion.clientes_alojados') }}" class="btn btn-secondary">
            <i class="fas fa-list"></i> Ver todos los huéspedes
        </a>
        {% else %}
        <p style="color: var(--text-light); font-size: 1.1rem;">
            No hay clientes alojados en este momento.
        </p>
        <a href="{{ url_for('recepcion.ver_reservas_checkin') }}" class="btn btn-primary">
            <i class="fas fa-sign-in-alt"></i> Ver Check-ins Pendientes
        </a>
        {% endif %}
    </div>
    {% endif %}
</div>

<style>
.badge {
    padding: 0.5em 0.75em;
    font-size: 0.875em;
    border-radius: 0.375rem;
}

.badge-info {
    background-color: #17a2b8;
    color: white;
}

.badge-primary {
    background-color: #007bff;
    color: white;
}

.form-inline .form-group {
    display: flex;
    align-items: center;
}

.table th {
    background-color: #f8f9fa;
    border-bottom: 2px solid #dee2e6;
    font-weight: 600;
}

.table td {
    vertical-align: middle;
}

.card-title {
    display: inline-block;
    margin: 0;
}
</style>

{% endblock %}